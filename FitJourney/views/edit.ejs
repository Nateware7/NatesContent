<%- include('partials/header') -%>
<!-- BACKGROUND -->
<header class="bg-black py-4">
  <div class="container mx-auto flex justify-center lg:flex-row md:flex-row">
    <a href="/feed" class="flex items-center justify-center lg:w-auto md:w-auto">
      <!-- Logo -->
      <img src="/RealBrand/FitJourneyTitle.png" alt="RealFit Logo" class="w-full h-12 lg:w-auto md:w-auto">
    </a>
  </div>
</header>

<div class="bg-black w-full h-auto flex flex-col justify-center items-center p-14">
  <!-- Profile Settings Title -->
  <h1 class="text-white font-title text-2xl sm:text-3xl w-full max-w-5xl mb-3 text-center sm:text-left">
    Welcome, <%= user.userName %>
  </h1>

  <!-- Profile Settings Form Section -->
  <div class="bg-white w-full max-w-5xl rounded-3xl pb-8 sm:pb-14">

    <!-- Header with Gradient -->
    <div class="bg-oranges p-6 sm:p-10 rounded-t-3xl mb-4 shadow-lg"></div>

    <!-- Form Content Below the Header -->
    <form action="/profile" method="POST" enctype="multipart/form-data" class="space-y-6 sm:space-y-8 p-4 sm:p-8 flex flex-col items-center">

      <!-- Email -->
      <h2 class="font-title text-black text-lg sm:text-xl text-center sm:text-left">
        <%= user.email %>
      </h2>

<!-- PFP CHANGE -->
<div class="flex justify-center items-center relative group overflow-hidden">
  <!-- Image -->
  <img 
    id="profileImagePreview"
    class="w-32 h-32 sm:w-40 sm:h-40 lg:w-48 lg:h-48 rounded-full object-cover object-center group-hover:opacity-50 transition-opacity duration-300"
    src="<%= user.profileImage %>" 
    onclick="document.getElementById('profileImage').click();" 
    alt="Profile Image"
     />

  <!-- Text Overlay -->
  <div class="absolute inset-0 flex justify-center items-center text-white font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer" onclick="document.getElementById('profileImage').click();">
    Change Picture
  </div>

  <label for="profileImage" class="block text-black font-semibold mb-2"></label>
  <input 
    type="file" 
    id="profileImage" 
    name="profileImage" 
    accept="image/*" 
    class="hidden" 
    onchange="previewImage(event)" 
  />
</div>

      
      <!-- BIO FORM -->
      <div class="mb-4 w-full max-w-xl">
        <label for="bio" class="block text-black font-title font-medium text-base text-center sm:text-left">Bio</label>
        <input 
          type="text" 
          class="w-full sm:w-[530px] h-12 bg-stone-100 rounded-lg text-base text-black font-title px-4 mt-2 mb-3 mx-auto sm:mx-0" 
          id="bio" 
          name="bio" 
          value="<%= user.bio %>"
        >
      </div>
      
      <!-- Save Button -->
      <div>
        <button 
          type="submit" 
          class="text-white w-40 sm:w-52 h-11 rounded-lg bg-oranges">
          Save
        </button>
      </div>
    </form>
  </div>
      <!-- LOGOUT BUTTON -->
      <div class="flex justify-center items-center mt-10">
        <a href="/logout" class="text-white bg-red-800  font-medium rounded-lg text-sm px-24 py-2.5">Logout</a>
       </div>     
</div>


<script>
  function previewImage(event) {
    const file = event.target.files[0];
    const reader = new FileReader();
    
    reader.onload = function(e) {
      // Set the new image source to the selected file
      document.getElementById('profileImagePreview').src = e.target.result;
    }
    
    if (file) {
      reader.readAsDataURL(file);
    }
  }
</script>


<%- include('partials/footer') -%>